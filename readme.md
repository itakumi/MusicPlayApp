# MusicPlayApp
音程と速度を自由に変更しながら音楽を再生します。制作においての過程は「process」branchにあります。

## 対応している拡張子
音源ファイルは.wav,.mp3,.mp4,.m4aに対応しています。
(注意!:エクスプローラーの名前変更等で拡張子を変更するとフォーマットが対応していないためエラーになります。)拡張子を変更したい場合は変換するソフト等を用いてください。

## 実行の仕方
```https://drive.google.com/file/d/1ZQV7lDdHRwZdgiYMEKRrSKy0ofVaW8ZF/view?usp=sharing```よりzipファイルをダウンロードし。MusicPlayAppフォルダの中のMusicPlayApp.exeを実行することでプレイヤーを開始できます。(フォルダ構造はそのままにしてください。ライブラリが参照できません)

## 操作の方法
### 1.出力デバイスの選択
ユーザーの出力デバイス一覧が表示されます。使用したい出力デバイスを選択してください。
最初にチェックが入っている項目はデフォルトで使われているデバイスです。
×ボタンで閉じるとデフォルトだと見なして次のステップへ行きます。
この選択はプログラム終了まで変更されないので出力デバイスを変更したくなったらプログラムをもう一度実行する必要があります。

### 2.ホーム画面
ホーム画面です。ほとんどの機能はプレイヤーを開始していないと使えません。(キーや速度の変更、再生モードの変更はできます。)
プレイヤーを開始する場合は「再生」ボタンを押すか、「プレイリスト」バナーより開始できます。
ホーム画面の各ボタンの説明は以下のようになっています

![](https://i.imgur.com/gmuehba.jpg)

各バナーの説明は以下の通りです。
#### 「アルゴリズム」
librosa→高性能オーディオライブラリlibrosaを用いてピッチシフト、タイムストレッチを行います。応答時間が多少かかります(1s弱)。
愚直アルゴリズム→numpyを使ってバイナリを操作するフルスクラッチでの実装です。応答時間が非常に速いです。
#### 「再生モード」
お気に入りのみを選択するとお気に入り登録した曲のみ再生します。
#### 「次に再生」
曲を右クリックして「「次に再生」リストに追加」をクリックするとここにたまっていき、再生します。「次に再生」リストから削除したい場合は「次に再生」バナーより曲にカーソルを当て、「リストから削除」によって削除できます。
#### 「ランキング」
##### 再生回数表示
現在再生しているプレイリストに入っている曲の今までの再生回数を表示します。
##### 再生回数トップ10!(このプレイリスト)
現在再生しているプレイリストの再生回数のうち上位10曲を表示します。
##### 再生回数トップ10!(すべてのプレイリスト)
すべてのプレイリストのうち再生回数上位10曲を表示します。
##### 再生回数をリセット
すべての再生回数をリセットします。
#### 「プレイリスト」
後述します(3.プレイリストの選択/再生)。

### 3.プレイリストの選択/再生
プレイヤーを開始する方法は大きく分けて2つあります。
#### 方法1.再生ボタンを押してプレイリストを指定
プレイヤーを開始していない状態で再生ボタンを押すとプレイリストを選択画面に移行します。「プレイリスト」バナー→「再生」でも同様です。
最初はこの方法で開始する必要があります

以下の3つの方法で選択できます。
##### パス指定
再生したいフォルダやファイルのパスを指定します。絶対パス、相対パスどちらでも可能です。(相対パスの場合はMusicPlayAppからの相対パスです)
カレントボタンを押すとカレントディレクトリを画面にセットします。
##### フォルダ参照
ファイルエクスプローラーを開いてフォルダを指定できます。

##### ファイル参照
ファイルエクスプローラーを開いてファイルを指定できます。
いずれの方法もその横にある再生ボタンを押すと再生できます。(同じ行の再生ボタンが対応しています。)

プレイリストとして
##### フォルダを指定した場合
そのフォルダの中にMusicPlayApp_Playlistというフォルダを作成しプレイリストを作成します。
##### ファイルを指定した場合
MusicPlayAppフォルダの中にMusicPlayApp_Playlist_{曲名}というフォルダを作成し、プレイリストを作成します。
予めこのような名前のフォルダが作成されているとうまく動きません。

#### 方法2.「プレイリスト」バナーより開始
##### 「最近開いたフォルダを開く」
「プレイリスト」バナー→「最近開いたフォルダを開く」にカーソルをあてると最近開いたプレイリスト5つが表示されます。クリックするとそのプレイリストを開始します。
##### 「お気に入りフォルダ」
「プレイリスト」バナー→「お気に入りフォルダ」より「現在再生中のフォルダをお気に入りに登録」によってお気に入り登録されたフォルダが閲覧でき、「再生」を押すことで開始できます。

### 4.再生
プレイリストを指定するとそのパスの中のチェックが始まります。(最初は対象ファイルの変換等の作業があるので多少処理が長くなります。)
右には再生リストが並んでいて曲名をクリックするとその曲を再生します。
曲をマウスの右クリックでクリックするとメニューが表示され、「次に再生」リストに追加、お気に入り登録/解除ができます。(以下は右クリックしたときの画像です)

![](https://i.imgur.com/qLDiKxQ.png)

#### 「次に再生」について
##### ・「お気に入りのみ」モードの時はお気に入り以外の曲を指定できないため、通常モードに直してから指定してください。
#### 「お気に入り登録/解除」について
##### ・(お気に入り登録/解除はマウスのホイール部分で曲をクリックすることでもできます。お気に入りを一つ以上登録した状態で「再生モード→お気に入りのみ」を選択するとお気に入りの曲のみを再生します。)
##### ・(最初の曲は現在再生中の曲の次にお気に入りの曲なので再生中の曲より下にお気に入りの曲がないとプレイリストが終了します)

### 5.キーボードショートカットについて
#### ・Ctrl-{1~9,0の数字}
お気に入りに登録しているフォルダを再生(0は10番目)
#### ・矢印(左右)
5秒巻き戻し、早送り
#### ・Enter
一時停止
#### ・Ctrl-矢印(左右)
10秒巻き戻し、早送り
#### ・Shift-矢印(左右)
速度変更
#### ・Shift-矢印(上下)
音程変更
#### ・Ctrl-Shift-矢印(左右)
前の曲、次の曲
#### ・Space
最初から
#### ・Escape
終了
#### Alt+{メニューバーの()内の値}
メニューを開く

### 6.終了
exitボタンで終了します。
exitボタンはプレイリスト再生中に押すとプレイリストが終了し、プレイリストを再生していないときに押すとプログラムが終了します。
→再生中にプログラムを終了させたいときはexitボタンを2回押す必要があります。
